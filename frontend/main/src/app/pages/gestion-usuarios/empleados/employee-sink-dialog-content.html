<h2 class="f-w-500 m-b-24" mat-dialog-title><strong>{{ action }}</strong></h2>

<ng-container *ngIf="action !== 'Eliminar' && action !== 'Delete'; else deleteTpl">
  <mat-dialog-content style="max-width: 640px">
    <form #userForm="ngForm">
      <!-- Autocompletar empleado existente -->
      <div class="row m-b-8">
        <div class="col-lg-12">
          <mat-form-field appearance="outline" class="w-100">
            <input type="text" matInput [formControl]="searchCtrl" [matAutocomplete]="auto" placeholder="Buscar empleado registrado" />
            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onSelectEmpleado($event.option.value)">
              <mat-option *ngFor="let e of filteredUsuarios" [value]="e">
                {{ e.nombre }} — {{ e.email }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>
      </div>

      <div class="d-flex align-items-center m-b-16">
        <img class="mat-card-avatar rounded-circle" [src]="local_data.imagePath || 'assets/images/profile/user-1.jpg'" width="50" />
        <button mat-flat-button color="primary" class="m-l-16 input-file-button">
          <input type="file" (change)="selectFile($event)" />
        </button>
      </div>
      <div class="row">
        <div class="col-lg-6">
          <mat-form-field appearance="outline" class="w-100">
            <input type="text" matInput required name="nombre" [(ngModel)]="local_data.Name" placeholder="Nombre" [readonly]="!!selectedUsuario" />
          </mat-form-field>
        </div>
        <div class="col-lg-6">
          <mat-form-field appearance="outline" class="w-100">
            <input type="text" matInput name="position" [(ngModel)]="local_data.Position" placeholder="Cargo" />
          </mat-form-field>
        </div>
        <div class="col-lg-6">
          <mat-form-field appearance="outline" class="w-100">
            <input type="email" matInput required name="email" [(ngModel)]="local_data.Email" placeholder="Correo" [readonly]="!!selectedUsuario" />
          </mat-form-field>
        </div>
        <div class="col-lg-6">
          <mat-form-field appearance="outline" class="w-100">
            <input type="text" matInput name="telefono" [(ngModel)]="local_data.Mobile" placeholder="Teléfono" />
          </mat-form-field>
        </div>
        <div class="col-lg-6">
          <mat-form-field appearance="outline" class="w-100">
            <input placeholder="Fecha de ingreso" [matDatepicker]="picker" matInput required name="fechaIngreso" [(ngModel)]="local_data.DateOfJoining" />
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
        <div class="col-lg-6">
          <mat-form-field appearance="outline" class="w-100">
            <input type="number" matInput required name="salario" [(ngModel)]="local_data.Salary" placeholder="Salario" />
          </mat-form-field>
        </div>
      </div>
      <button mat-flat-button color="primary" [disabled]="!userForm.valid" (click)="doAction()">{{ action }}</button>
      <button mat-stroked-button color="warn" class="m-l-8" (click)="closeDialog()">Cancelar</button>
    </form>
  </mat-dialog-content>
</ng-container>

<ng-template #deleteTpl>
  <div class="p-x-24">
    <p>¿Seguro que deseas eliminar a <span class="f-w-600">{{ local_data?.Name }}</span>?</p>
  </div>
  <div mat-dialog-actions class="p-x-24 p-b-24">
    <button mat-button (click)="doAction()" mat-flat-button color="warn">{{ action }}</button>
    <button mat-button (click)="closeDialog()" class="m-l-8">Cancelar</button>
  </div>
</ng-template>
